<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.3.2">Jekyll</generator><link href="https://pvgupta24.github.io/feed.xml" rel="self" type="application/atom+xml" /><link href="https://pvgupta24.github.io/" rel="alternate" type="text/html" hreflang="en" /><updated>2023-09-02T00:09:36-07:00</updated><id>https://pvgupta24.github.io/feed.xml</id><title type="html">Praveen Gupta</title><subtitle>Personal Website of Praveen Gupta
</subtitle><author><name>Praveen Gupta</name><email>pvgupta24@gmail.com</email></author><entry><title type="html">Vancouver House Hunting</title><link href="https://pvgupta24.github.io/2023/04/26/vancouver-house-hunting/" rel="alternate" type="text/html" title="Vancouver House Hunting" /><published>2023-04-26T00:00:00-07:00</published><updated>2023-04-26T00:00:00-07:00</updated><id>https://pvgupta24.github.io/2023/04/26/vancouver-house-hunting</id><content type="html" xml:base="https://pvgupta24.github.io/2023/04/26/vancouver-house-hunting/"><![CDATA[<p>So, you decided to move to a major city in a new country. You have no hopes of getting university residence. You can always get some off-campus housing, right? Right?</p>

<p><img src="https://media.tenor.com/bVh8C-q-TG4AAAAC/interstellar-cost.gif" alt="Little-Maneveur-Meme" /></p>

<h3 id="step-1-apply-to-on-campus-housing">Step-1: Apply to on-campus housing</h3>
<p>No, seriously. The right time to apply for UBC housing was 1 year before you started applying to grad school.
But in all seriousness, it’s good to apply for winter and year-round residence even if there is no possibility to get it for your next term. Even if you sign a lease somewhere, there is a possibility that the lease ends sooner, or that you cannot extend the housing term.</p>

<h3 id="step-2-prepare-your-application">Step-2: Prepare your application</h3>
<p>Sorry to break it to you, this is gonna be harder than your grad school applications. As the property managers like to say here, “You do not choose the house, the house chooses you”. Housing meetups with property managers/landlors are similar to meeting a partner’s parents for marriage. They would expect you to be financially steady with good savings/job, and to keep the house happy.
Compile a pdf of as much documents as you can in advance as the houses are rented within a day of listing:</p>

<ul>
  <li><strong>Identity</strong>: Passport, study permit/ University ID/ Other IDs: University Offer Letter</li>
  <li><strong>Proof of Funds</strong>: Bank Statements (All countries), Job Offer letter/ Payslips, Credit Report, GIC</li>
  <li><strong>References with Contact</strong>: Past employers, Past landlords, Past roommates?</li>
</ul>

<h3 id="step-3-arrive-early-for-house-hunting">Step-3: Arrive early for house hunting</h3>
<p>House hunting can be a full-time job, and you don’t want to be stuck temporarily when the term starts.</p>
<ul>
  <li>Try to arrive a month in advance. Get a sublet in on-campus dorms if needed.</li>
  <li>Don’t finalize a place without seeing it first, as some listings may be scams or misleading.</li>
  <li>Use websites such as Facebook Marketplace, Craigslist, Zumper, liv.rent, and PadMapper to find housing.</li>
  <li>Send messages or emails to hundreds of listings and prepare a short template to save time. For existing renters seeking new roomates, use this to convey that your are a good fit based on the listing description. Seems like job hunting at this point :P</li>
  <li>Keep track of your viewings on a calendar, and search on <a href="https://students.ubc.ca/sites/students.ubc.ca/files/Buses_from_UBC_Exchange.pdf">major commute lines</a>.</li>
</ul>

<h3 id="step-4-find-others-with-your-level-of-desperation">Step-4: Find others with your level of desperation</h3>
<p><img src="https://media.tenor.com/Cea-Hbq5qwUAAAAd/apes-together-strong-monkey.gif" alt="Apes-Meme" /></p>

<p>The first time you go for a house viewing, you will see a long queue of students ready to take whatever housing is available at any nonsensical price (and hence these prices continue). This is gonna be a “networking opportunity” to get a gang together to look for houses. Alternatively, you can also post on facebook housing groups for the area and find like-minded folks to team up with with similar constraints &amp; preferences. It’s important to find quality roommates as they will have a significant impact on your life. There is higher competition for smaller houses, so you might get lucky with a larger group. Dividing the house viewing visits is added bonus, and ofc you will have friends to cry together when you are unable to find one :P</p>

<h3 id="possible-sources-of-frustration">Possible Sources of Frustration</h3>
<p>This is a long process. I will list down the things you can encounter in advance:
<img alt="Cat Meme" src="https://i.pinimg.com/originals/c7/d9/3e/c7d93e966c2fe7401e15cb09ac222ee5.gif" width="60%" /></p>

<ul>
  <li>Your cat maybe cute, but most landlords prefer a no-pet policy</li>
  <li>You will likely be ignored by 80% folks you contact. Maybe reach out in a day, then move-on</li>
  <li>You might encounter a bidding war between groups for renting</li>
  <li>“We are renting to families only. Sorry”. Are there joint families with 3 generations who are moving so frequently? Who are renting these 10 bed places? Continues to remain a mystery for me.</li>
  <li>In some rare cases, folks would not even try to hide their “preferences”. Real words of rejection: “Indians use a lot of garlic and cook a lot, the house will start smelling like curry -_-“</li>
</ul>

<!-- <img alt="Garlic Meme" src="https://i.imgflip.com/3rtygi.jpg"  width="60%"> -->

<h3 id="silver-linings">Silver Linings</h3>
<p>Though unintentionally, you will</p>
<ul>
  <li>Get to explore all neighbourhoods in the city</li>
  <li>Get to know all the property manager on a first name basis</li>
</ul>

<p>Good luck with your search!! 
<img src="https://media.tenor.com/bzN3sWPKEZAAAAAC/rant-ranting.gif" alt="Rant" /></p>]]></content><author><name>Praveen Gupta</name><email>pvgupta24@gmail.com</email></author><category term="vancouver" /><category term="experience" /><summary type="html"><![CDATA[Moving to UBC/Vancouver? Here's a guide to off-campus house hunting. Probably applies to most major cities at the moment]]></summary></entry><entry><title type="html">GSoC 2018 with Jitsi - Overview</title><link href="https://pvgupta24.github.io/2018/08/12/gsoc18-overview/" rel="alternate" type="text/html" title="GSoC 2018 with Jitsi - Overview" /><published>2018-08-12T00:00:00-07:00</published><updated>2018-08-12T00:00:00-07:00</updated><id>https://pvgupta24.github.io/2018/08/12/gsoc18-overview</id><content type="html" xml:base="https://pvgupta24.github.io/2018/08/12/gsoc18-overview/"><![CDATA[<p>I was working on enabling translations to different languages with speech-to-text
in <a href="https://meet.jit.si/">Jitsi-Meet</a> as a part of GSoC 2018 this summer.</p>

<p>Here is the brief description of the work :</p>

<h3 id="what-works-now-">What works now ?</h3>
<p>This project allows us to get the speech-to-text results in different target languages for
translation and also to transcribe in different source languages.</p>

<p>After we start the transcription service, we can specify the source language for the participant
in the console by setting the local participant property <code class="language-plaintext highlighter-rouge">transcription_language</code> to the required
language tag. This sends the speech-to-text transcription results as JSON messages to be displayed
in near real time as subtitles.</p>

<p>For getting the final results of transcription in a different language, we can set the local participant
property <code class="language-plaintext highlighter-rouge">translation-result</code> to the required language tag. In this case, the translated results
in the specific language will be shown.</p>

<iframe width="780" height="500" src="https://www.youtube.com/embed/aq8J_g9JgWs?rel=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>

<p>The final transcript of the entire meet is also prepared and stored as a <code class="language-plaintext highlighter-rouge">.txt</code> and <code class="language-plaintext highlighter-rouge">.json</code> file locally
on the server.</p>
<pre><code class="language-txt">Transcript of conference held at 12 Aug, 2018 in room GSoC-2018-Jitsi@conference.praveen.jitsi.net
Initial people present at 7:35:13 AM:
Praveen

Transcript, started at 7:35:13 AM:
________________________________________________________________________________
&lt;7:35:15 AM&gt; Praveen joined the conference
&lt;7:35:17 AM&gt; Praveen: 
&lt;7:35:26 AM&gt; Praveen: नमस्ते 
&lt;7:35:39 AM&gt; Praveen: आप कैसे हैं
&lt;7:36:11 AM&gt; Praveen: आप उपशीर्षक में अनुवादित पाठ देख सकते हैं 
________________________________________________________________________________


End of transcript at 12 Aug, 2018 7:36:22 AM
</code></pre>

<h3 id="how-does-it-work-">How does it work ?</h3>
<p>After the transcriber joins the Jitsi-Meet conference room as a participant, it starts the transcription
using a transcription service (Currently <a href="https://cloud.google.com/speech/">Google Cloud Speech-to-text Service</a>).</p>

<p>The results of transcription are forwarded to a Translation Manager which keeps track of the list of
target languages for translation. If these are final transcription results, they are translated using
the <a href="https://cloud.google.com/translate">Google Cloud Translation Service</a> and sent to the Jitsi-Meet conference as JSON messages.</p>

<p>Jitsi-Meet receives the results in all languages and displays the ones which have the required language tag and ignores the other ones.
Jigasi can be configured to send translation results as plain text messages in the Chatroom but it will flood the Chatroom with messages.</p>

<h3 id="technical-aspects">Technical Aspects</h3>
<p>We needed to make changes in the following Jitsi projects for making translations possible :)</p>

<h4 id="jigasi"><a href="https://github.com/jitsi/jigasi">Jigasi</a></h4>
<p>When the <a href="https://github.com/jitsi/jigasi/blob/master/src/main/java/org/jitsi/jigasi/transcription/Transcriber.java">Transcriber</a> joins a conference, it creates a <a href="https://github.com/jitsi/jigasi/blob/master/src/main/java/org/jitsi/jigasi/transcription/TranslationManager.java">TranslationManager</a> object with a <a href="https://github.com/jitsi/jigasi/blob/master/src/main/java/org/jitsi/jigasi/transcription/TranslationService.java">TranslationService</a>.
Currently <a href="https://github.com/jitsi/jigasi/blob/master/src/main/java/org/jitsi/jigasi/transcription/GoogleCloudTranslationService.java">GoogleCloudTranslationService</a> is used but other services can be used by implementing <code class="language-plaintext highlighter-rouge">TranslationService</code>.
The <code class="language-plaintext highlighter-rouge">TranslationManager</code> keeps a list of <a href="https://github.com/jitsi/jigasi/blob/master/src/main/java/org/jitsi/jigasi/transcription/TranslationResultListener.java">TranslationResultListener</a>, which is an interface which can be used to decide the way the translation results are to be used.</p>

<p>Once a user changes the preference for the required language in Jitsi Meet, a presence update is notified to the connected participants
including the transcriber <a href="https://github.com/jitsi/jigasi/blob/master/src/main/java/org/jitsi/jigasi/JvbConference.java#L778">here</a>.
This is parsed <a href="https://github.com/jitsi/jigasi/blob/master/src/main/java/org/jitsi/jigasi/TranscriptionGatewaySession.java#L265">here</a>
to get the participant and the language tag (either source language which is ‘en-US’ by default or target language for the participant) and is notified to the TranslationManager which keeps a count of the participants who need a particular language.
If no more participants need a language, it is removed from the list of languages.</p>

<p>Once a TranscriptionResult is formed, the manager is notified about it which uses the translation service to translate in all the required objects and makes a <a href="https://github.com/jitsi/jigasi/blob/master/src/main/java/org/jitsi/jigasi/transcription/TranslationResult.java">TranslationResult</a>
for each of the language and notifies all the <a href="https://github.com/jitsi/jigasi/blob/master/src/main/java/org/jitsi/jigasi/transcription/TranslationResultListener.java">TranslationResultListener</a>.</p>

<p>The <a href="https://github.com/jitsi/jigasi/blob/master/src/main/java/org/jitsi/jigasi/transcription/LocalJsonTranscriptHandler.java#L236">LocalJsonTranscriptHandler</a> sends the json of the type <code class="language-plaintext highlighter-rouge">translation-result</code> to the conference where it is interpreted accordingly.</p>

<p>List of PRs in Jigasi :</p>
<ul>
  <li><a href="https://github.com/jitsi/jigasi/pull/111">https://github.com/jitsi/jigasi/pull/111</a></li>
  <li><a href="https://github.com/jitsi/jigasi/pull/124">https://github.com/jitsi/jigasi/pull/124</a></li>
  <li><a href="https://github.com/jitsi/jigasi/pull/127">https://github.com/jitsi/jigasi/pull/127</a></li>
</ul>

<p>I also sent a PR towards the end of the coding period for storing the final transcript
of the meet in all the requested target languages.
The translations are stored in a map in the <a href="https://github.com/jitsi/jigasi/blob/master/src/main/java/org/jitsi/jigasi/transcription/Transcript.java">Transcript</a>.
After a meet is over or the Transcriber is kicked out, the translations are accumulated and formatted,
by translating the transcription speech events whose translations aren’t present yet.</p>

<ul>
  <li><a href="https://github.com/jitsi/jigasi/pull/130">https://github.com/jitsi/jigasi/pull/130</a></li>
</ul>

<h4 id="jitsi"><a href="https://github.com/jitsi/jitsi">Jitsi</a></h4>
<p>We needed to add few extensions to the XMPP stanzas :</p>

<p>Message extension for sending the json messages in a different container (than the body which was used previously)</p>
<ul>
  <li><a href="https://github.com/jitsi/jitsi/pull/509">https://github.com/jitsi/jitsi/pull/509</a></li>
</ul>

<p>Presence Extensions for sending the language preference of the user. (Both source and target language)</p>
<ul>
  <li><a href="https://github.com/jitsi/jitsi/pull/495">https://github.com/jitsi/jitsi/pull/495</a></li>
  <li><a href="https://github.com/jitsi/jitsi/pull/504">https://github.com/jitsi/jitsi/pull/504</a></li>
</ul>

<h4 id="jitsi-meet"><a href="https://github.com/jitsi/jitsi-meet">Jitsi-Meet</a></h4>
<p>As discussed in the first blog post, I worked on the react feature subtitles (renamed from transcription) to display
transcription messages as subtitles. It was then extended to show the translation results if a target language is selected
from the console with <code class="language-plaintext highlighter-rouge">APP.conference._room.setLocalParticipantProperty('translation_language','hi');</code> in which case it
uses the json-message  of type translation-result:</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;message</span> <span class="err">...</span><span class="nt">&gt;</span>
  <span class="nt">&lt;json-message</span> <span class="err">...</span><span class="nt">&gt;</span>
    {
      "type":"translation-result",
      "text":"नमस्ते आप कैसे हैं?",
      "is_interim":false,
      "language":"hi-IN",
      "message_id":"14fcde1c-26f8-4c03-ab06-106abccb510b",
      "event":"SPEECH",
      "participant":{
          "name":"Praveen",
          "id":"d62f8c36"
      },
      "stability":0.0,
      "timestamp":"201-07-10T11:04:05.637Z"
    }
  <span class="nt">&lt;/json-message&gt;</span>
<span class="err">&lt;</span>/message
</code></pre></div></div>
<p>The language tag of the received json is used to show the subtitles only in the desired language.</p>

<ul>
  <li><a href="https://github.com/jitsi/jitsi-meet/pull/1914">https://github.com/jitsi/jitsi-meet/pull/1914</a> (from <a href="https://github.com/jitsi/jitsi-meet/pull/1914/commits/48e23fee623c587c18ef76bf0f7033bbec7b9f42">this commit</a>)</li>
  <li><a href="https://github.com/jitsi/jitsi-meet/pull/3276">https://github.com/jitsi/jitsi-meet/pull/3276</a></li>
</ul>

<p>Note that the source language can be set in a similar way
<code class="language-plaintext highlighter-rouge">APP.conference._room.setLocalParticipantProperty('transcription_language','hi-IN');</code></p>

<h4 id="lib-jitsi-meet"><a href="https://github.com/jitsi/lib-jitsi-meet">Lib-Jitsi-Meet</a></h4>
<p>Small changes were required in the lower level JS library used by Jitsi Meet to parse and send json-messages in a 
separate container and to set and remove local participant properties which is used by Jitsi Meet to add/remove the
language preference</p>

<ul>
  <li><a href="https://github.com/jitsi/lib-jitsi-meet/pull/770">https://github.com/jitsi/lib-jitsi-meet/pull/770</a></li>
  <li><a href="https://github.com/jitsi/lib-jitsi-meet/pull/783">https://github.com/jitsi/lib-jitsi-meet/pull/783</a></li>
</ul>

<h3 id="future-work">Future Work</h3>
<p>There is always a room of improvement in any project. Some of them can be :</p>

<ul>
  <li>After Nik’s <a href="https://github.com/jitsi/jitsi-meet/pull/3213">PR</a> added UI elements to enable
transcription, the next step would be to add UI elements for choosing source language for
transcription and target language for translations.</li>
  <li>Looking into open source alternatives for translations.</li>
  <li>Currently the translations are only displayed as subtitles and are not send as chatbox messages
as it will flood the chatbox with speech-to-text results in translated languages. Another persistant
UI element to display the translated results in desired languages can be helpful for people joining
the conference at a later stage to go through the past events in the desired language.</li>
  <li>Sending the final transcript in target languages to the fron-end client after a meet gets over.</li>
  <li>Making the option to store final transcripts in all target languages configurable.</li>
  <li>As the work hasn’t been tested heavily, it is prone to having minor bugs which needs to be fixed.</li>
</ul>]]></content><author><name>Praveen Gupta</name><email>pvgupta24@gmail.com</email></author><category term="gsoc" /><summary type="html"><![CDATA[Overview of work done during the Google Summer of Code 2018 with Jitsi.]]></summary></entry><entry><title type="html">Phase 2 - Translating Transcription Messages</title><link href="https://pvgupta24.github.io/2018/07/14/gsoc18-phase-2/" rel="alternate" type="text/html" title="Phase 2 - Translating Transcription Messages" /><published>2018-07-14T00:00:00-07:00</published><updated>2018-07-14T00:00:00-07:00</updated><id>https://pvgupta24.github.io/2018/07/14/gsoc18-phase-2</id><content type="html" xml:base="https://pvgupta24.github.io/2018/07/14/gsoc18-phase-2/"><![CDATA[<p>Here’s a brief summary of my work in the 2nd phase of GSoC 2018:</p>

<h2 id="what-did-i-work-on">What did I work on?</h2>
<h3 id="json-message-extension">Json Message Extension</h3>
<p>I continued working on a Message stanza extension element for sending the required
json-messages in a different packet instead of sending it in the body of the message from
Jigasi.
Now, the transcription messages being sent look like this :</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;message</span> <span class="err">...</span><span class="nt">&gt;</span>
  <span class="nt">&lt;json-message</span> <span class="err">...</span><span class="nt">&gt;</span>
    {
      "type":"transcription-result",
      "transcript":[
          {
            "confidence":0.0,
            "text":"this is an example Json message"
          }
      ],
      "is_interim":false,
      "language":"en-US",
      "message_id":"14fcde1c-26f8-4c03-ab06-106abccb510b",
      "event":"SPEECH",
      "participant":{
          "name":"Nik",
          "id":"d62f8c36"
      },
      "stability":0.0,
      "timestamp":"2017-08-24T11:04:05.637Z"
    }
  <span class="nt">&lt;/json-message&gt;</span>
<span class="err">&lt;</span>/message
</code></pre></div></div>

<p>This required the following changes in <a href="https://github.com/jitsi/jitsi">Jitsi</a>
and <a href="https://github.com/jitsi/jigasi">Jigasi</a></p>
<ul>
  <li><a href="https://github.com/jitsi/jitsi/pull/495">https://github.com/jitsi/jitsi/pull/495</a></li>
  <li><a href="https://github.com/jitsi/jigasi/pull/111">https://github.com/jitsi/jigasi/pull/111</a></li>
</ul>

<p>Sending json-messages from the front end components required minor changes in
<a href="https://github.com/jitsi/lib-jitsi-meet">lib-jitsi-meet</a></p>
<ul>
  <li><a href="https://github.com/jitsi/lib-jitsi-meet/pull/770">https://github.com/jitsi/lib-jitsi-meet/pull/770</a></li>
</ul>

<h3 id="translation-layer">Translation Layer</h3>
<p>I continued with adding an abstract translation layer for server side translations
in Jigasi. An abstract translation service was added to use any required translation
services and <code class="language-plaintext highlighter-rouge">GoogleCloudTranslate</code> was implemented.</p>

<p>A <code class="language-plaintext highlighter-rouge">TranslationManager</code> which implemented a <code class="language-plaintext highlighter-rouge">TranscriptionListener</code> was used to keep a
count of the required languages for translation as per the participants in the conference.
Once the <code class="language-plaintext highlighter-rouge">TranslationManager</code> is notified of a final <code class="language-plaintext highlighter-rouge">TranslationResult</code>, it uses then
<code class="language-plaintext highlighter-rouge">TranslationService</code> to get translations in all the required languages.
We do not translate the interim messages because the it would lead to higher costs and we
need the full context of a sentence for translations.
All the translated results are then notified to the list of <code class="language-plaintext highlighter-rouge">TranslationResultListener</code>s.</p>

<p>We do not publish the translation results in the Chatroom as it will flood it with translation
results in different languages. We send the json-messages of the type <code class="language-plaintext highlighter-rouge">translation-result</code> which
can be parsed to show only the required results in the front-end. This json looks
like this :</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;message</span> <span class="err">...</span><span class="nt">&gt;</span>
  <span class="nt">&lt;json-message</span> <span class="err">...</span><span class="nt">&gt;</span>
    {
      "type":"translation-result",
      "text":"नमस्ते आप कैसे हैं?",
      "is_interim":false,
      "language":"hi-IN",
      "message_id":"14fcde1c-26f8-4c03-ab06-106abccb510b",
      "event":"SPEECH",
      "participant":{
          "name":"Praveen",
          "id":"d62f8c36"
      },
      "stability":0.0,
      "timestamp":"201-07-10T11:04:05.637Z"
    }
  <span class="nt">&lt;/json-message&gt;</span>
<span class="err">&lt;</span>/message
</code></pre></div></div>

<p>The next task was to send the preference of target language from the front-end.
After discussions, we decided to use the presence stanza to send the language preference
to Jigasi. This can be updated from the developer console in the browser as of now with :
<code class="language-plaintext highlighter-rouge">APP.conference._room.setLocalParticipantProperty('translation_language','hi');</code></p>

<p>This triggers <code class="language-plaintext highlighter-rouge">JvbConference#memberPresenceChanged</code>. We parse the target language using
a custom presence stanza extension in <code class="language-plaintext highlighter-rouge">Jitsi</code> and set this language preference for the
participant with the given id and is added to the map of languages in <code class="language-plaintext highlighter-rouge">TranslationManager</code>.</p>

<p>This was enabled in the following PRs :</p>
<ul>
  <li><a href="https://github.com/jitsi/jitsi/pull/504">https://github.com/jitsi/jitsi/pull/504</a></li>
  <li><a href="https://github.com/jitsi/jigasi/pull/124">https://github.com/jitsi/jigasi/pull/124</a></li>
</ul>

<h2 id="what-am-i-currently-working-on-">What am I currently working on ?</h2>
<p>I am currently working on using the json-messages of type <code class="language-plaintext highlighter-rouge">translation-result</code> received
in <code class="language-plaintext highlighter-rouge">Jitsi-Meet</code> to display the final results as subtitles only in the specified language.</p>

<h2 id="future-work">Future Work</h2>
<ul>
  <li>The souce language for transcription is harcoded to <code class="language-plaintext highlighter-rouge">en-US</code> as of now. We initially decided
to send this language with the dial made for the transcriber in the <code class="language-plaintext highlighter-rouge">iq</code> stanza but now
will be sent in a similar manner as that of the target language as it will allow us to set
different source languages for each participant.</li>
  <li>The language preferences are set from the console as of now. UI elements to select the
source and target languages from a list is to be designed.</li>
</ul>]]></content><author><name>Praveen Gupta</name><email>pvgupta24@gmail.com</email></author><category term="gsoc" /><summary type="html"><![CDATA[Added json-message extensions and translated the transcription messages by working with [Jigasi](https://github.com/jitsi/jigasi) - the SIP component of Jitsi]]></summary></entry><entry><title type="html">Phase 1 - Displaying Transcription Subtitles</title><link href="https://pvgupta24.github.io/2018/06/02/gsoc18-phase-1/" rel="alternate" type="text/html" title="Phase 1 - Displaying Transcription Subtitles" /><published>2018-06-02T00:00:00-07:00</published><updated>2018-06-02T00:00:00-07:00</updated><id>https://pvgupta24.github.io/2018/06/02/gsoc18-phase-1</id><content type="html" xml:base="https://pvgupta24.github.io/2018/06/02/gsoc18-phase-1/"><![CDATA[<p>The first phase of GSoC 2018 is coming to an end.
Let me share my experience and contributions so far with this blog post :)</p>

<h2 id="what-did-i-work-on">What did I work on?</h2>
<p>My main task in this phase was to work on <a href="https://github.com/jitsi/jitsi-meet">Jitsi Meet</a>
which is the repository containing the front-end client of the application.</p>

<h3 id="existing-code">Existing Code</h3>
<p>One of my mentors <a href="https://github.com/nikvaessen">Nik Vaessen</a> worked on
Integrating Speech to Text as a GSoC student in 2016 and 2017.</p>

<p>Nik made a pull request at the end of his coding period last summer for rendering
subtitles in the form of a React Component. I picked up from where Nik had left off 
and continued working on it.</p>

<h3 id="my-work">My Work</h3>
<p>I worked on the <code class="language-plaintext highlighter-rouge">transcription</code> feature to enable displaying (nearly) real time transcription
subtitles conference. So, currently the subtitles can be seen as follows :</p>

<p><img src="/assets/img/blog/gsoc18-phase-1/subtitles.png" alt="Subtitles" /></p>

<p>I made a couple of pull requests to my mentor’s fork :</p>
<ul>
  <li><a href="https://github.com/nikvaessen/jitsi-meet/pull/2">https://github.com/nikvaessen/jitsi-meet/pull/2</a></li>
  <li><a href="https://github.com/nikvaessen/jitsi-meet/pull/3">https://github.com/nikvaessen/jitsi-meet/pull/3</a></li>
</ul>

<p>whose changes reflect in the pull request in the main repository :<br />
<a href="https://github.com/jitsi/jitsi-meet/pull/1914">https://github.com/jitsi/jitsi-meet/pull/1914</a></p>

<h3 id="technical-aspects---how-things-work-">Technical aspects - How things work ?</h3>
<p><a href="https://github.com/jitsi/jigasi">Jigasi</a> - JItsi GAteway to SIP implements a speech to text
service using <a href="https://cloud.google.com/speech-to-text/">Google Cloud Speech to Text</a> and acts
like a transciber by joining the meet room as a participant. During the meeting Jigasi will
receive the audio chunks ofthe participants, forward them to the Google API and send the transcribed
message back the the participants in the JSON format seen below.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"transcript"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"confidence"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"text"</span><span class="p">:</span><span class="s2">"Testing Speech to Text"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"is_interim"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"language"</span><span class="p">:</span><span class="s2">"en-US"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message_id"</span><span class="p">:</span><span class="s2">"8360900e-5fca-4d9c-baf3-6b24206dfbd7"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"event"</span><span class="p">:</span><span class="s2">"SPEECH"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"participant"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Praveen"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"d14c8f32"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"stability"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="s2">"2017-06-24T11:04:05.637Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>This payload, once received by the conference, triggers an <code class="language-plaintext highlighter-rouge">ENDPOINT_MESSAGE_RECEIVED</code>
event listener. This listener dispatches the <code class="language-plaintext highlighter-rouge">endpointMessageReceived</code> redux action. The
middleware function of the transcription feature listens for the <code class="language-plaintext highlighter-rouge">endpointMessageReceived</code>
action and is responsible for using the received payload to update the subtitles. The Redux
state of <code class="language-plaintext highlighter-rouge">features/transcription</code> contains a Map <code class="language-plaintext highlighter-rouge">transcriptionSubtitles</code> of key value pairs
which maps the message_id with the text.</p>

<p>As the audio streams are continuously being sent to the Google API, we need to know when a
continuous stream has ended and interpret the next one as a new message.
For this to work, we use the detailed information received from the Google API which includes
a field telling us if the particular transcript is an interim result or a final one.</p>

<p>In Jigasi, we use the same <a href="https://searchmicroservices.techtarget.com/definition/UUID-Universal-Unique-Identifier">UUID</a>
as its message_id to denote a particular message until we recieve a final stable message.</p>

<p>If the received message_id is not one among the keys in the Map, a pair of message_id
and the participant name is added to the Map.</p>

<p>There are 3 scenarios when a message_id exists in the Map :</p>
<ul>
  <li>If it is a final message, it is added as a final component in the Map value and a timeout is
used to dipatch a <code class="language-plaintext highlighter-rouge">REMOVE_TRANSCRIPT_MESSAGE</code> action which removes the key,value pair from the
map after a defined period..</li>
  <li>If it is an interim message with high stability, it is added as a stable component in the Map.</li>
  <li>If it is an interim message with low stability, it is added as an unstable component in the Map.</li>
</ul>

<p>While displacying the particular message in the Component, either the final message is used as the text,
or the stable and unstable components are concatenated and used as text.</p>

<p><code class="language-plaintext highlighter-rouge">TranscriptionSubtitles.web.js</code> Component uses the <code class="language-plaintext highlighter-rouge">Map</code> as a Prop to re-render the transcription text
paragraphs every time it gets updated and displays it accordingly :)</p>

<h3 id="challenges-faced-and-learning-outcomes">Challenges faced and Learning Outcomes</h3>
<ul>
  <li>Large Codebase: Became familiar with the codebase and the different components involved.</li>
  <li>Basics of XMPP: Learnt more about the XMPP standard for presence and messaging.</li>
  <li>React-Redux: Got familiar with how a react-redux applications works</li>
  <li>Better version control: You can say I moved on from the <em>add, commit, push</em> philosophy ;)</li>
</ul>

<h2 id="what-am-i-currently-working-on-">What am I currently working on ?</h2>
<p>Currently the transcibed message in JSON format is sent through the XMPP Message stanza 
encapsulated in its body as follows:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;message</span> <span class="err">...</span><span class="nt">&gt;</span>
  <span class="nt">&lt;body</span> <span class="err">...</span><span class="nt">&gt;</span>
    {
      "jitsi-meet-muc-msg-topic":"transcription-result",
        "payload":{
          "transcript":[
              {
                "confidence":0.0,
                "text":"this is an example Json message"
              }
          ],
          "is_interim":false,
          "language":"en-US",
          "message_id":"14fcde1c-26f8-4c03-ab06-106abccb510b",
          "event":"SPEECH",
          "participant":{
              "name":"Nik",
              "id":"d62f8c36"
          },
          "stability":0.0,
          "timestamp":"2017-08-24T11:04:05.637Z"
        }
    }
  <span class="nt">&lt;/body&gt;</span>
<span class="err">&lt;</span>/message
</code></pre></div></div>
<p>In this approach, we do not come to know that that the particular message received contains
a JSON type message in its body unless we manually check the entire string in the message body
to parse and check for a JSON type message.</p>

<p>This is not a very neat approach considering the fact that we are using the same data channel
for sending multiple types of messages.</p>

<p>I am working to improve this with a packet extension in Jitsi by encapsulating the JSON body
in a <code class="language-plaintext highlighter-rouge">json-message</code> element, so that the Jigasi sends the following XMPP Stanza :</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;message</span> <span class="err">...</span><span class="nt">&gt;</span>
  <span class="nt">&lt;json-message</span> <span class="na">xmlns=</span><span class="s">https://www.jitsi.org/jitsi-meet</span><span class="nt">&gt;</span>
    {
      'type': 'transcription-result',
      'transcript':[
      {
        'confidence':0,
        'text':'Testing Stuff'
      }
      ],
      'is_interim':true,
      'language':'en-US',
      'message_id':'8360900e-5fca-4d9c-baf3-6b24206dfbd7',
      'event':'SPEECH',
      'participant':{
        'name':'Praveen',
        'id':'2fe3ac1c'
      },
      'stability':0.009999999776482582,
      'timestamp':'2017-08-21T14:35:46.342Z'
    }
  <span class="nt">&lt;/json-message&gt;</span>
<span class="nt">&lt;/message&gt;</span>
</code></pre></div></div>
<p>So we can see that the required JSON message will be encapsulated in its own packet which
can be thought of as a container to hold json strings only. After this, we can simply
check for the particular container in the <code class="language-plaintext highlighter-rouge">message</code> stanza and interpret it as json message
compared to the previous approach where one had to try to parse it first.</p>

<h2 id="future-work">Future Work</h2>
<p>Initially we decided on going with the client-side translations but after proper research
of the available options, we decided to change it to server-side translations due to:</p>
<ul>
  <li>Lack of free services.</li>
  <li>Requirement of authentication for the paid ones which may lead to abuse of the service
and extra costs.</li>
</ul>

<p><strong>Server-Side Translations</strong> will be helpful as:</p>
<ul>
  <li>More secure as only the required audio will be translated.</li>
  <li>It will prevent misuse of paid translation services.</li>
  <li>The abstract implementation will allow for easily extending it with other external translation
services as per choice and a locally setup service as well.</li>
  <li>Ease in preparing the final transcript of the meet in the required translated language.</li>
</ul>]]></content><author><name>Praveen Gupta</name><email>pvgupta24@gmail.com</email></author><category term="gsoc" /><summary type="html"><![CDATA[Worked with *jitsi-meet* - the front end component for [https://meet.jit.si](https://meet.jit.si).]]></summary></entry><entry><title type="html">Phase 0 - Selected for GSoC with Jitsi</title><link href="https://pvgupta24.github.io/2018/05/02/gsoc18-phase-0/" rel="alternate" type="text/html" title="Phase 0 - Selected for GSoC with Jitsi" /><published>2018-05-02T00:00:00-07:00</published><updated>2018-05-02T00:00:00-07:00</updated><id>https://pvgupta24.github.io/2018/05/02/gsoc18-phase-0</id><content type="html" xml:base="https://pvgupta24.github.io/2018/05/02/gsoc18-phase-0/"><![CDATA[<p><em>Phase 0</em> because indexing starts with <em>ZERO</em>. Period ;)</p>

<h3 id="what-is-google-summer-of-code-">What is Google Summer of Code ?</h3>
<blockquote>
  <p><em>Google Summer of Code is a global program focused on bringing more student developers
into open source software development. Students work with an open source organization on
a 3 month programming project during their break from school/university.</em></p>
</blockquote>

<p>It is a program supported and funded by Google to support open source organisations where
the mentors from the selected organisations provide guidance to the students and help them
in contributing in the right direction.</p>

<h3 id="what-is-jitsi-">What is Jitsi ?</h3>
<blockquote>
  <p><em>Jitsi is a set of open-source projects that allows you to easily build and deploy secure
videoconferencing solutions. At the heart of Jitsi are Jitsi Videobridge and Jitsi Meet, 
which let you have conferences on the internet, while other projects in the community enable
other features such as audio, dial-in, recording, and simulcasting.</em></p>
</blockquote>

<p>You can try out the platform from the browser here : <a href="https://meet.jit.si/">https://meet.jit.si/</a></p>

<h3 id="my-project-proposal">My Project Proposal</h3>
<p>My major aim in the project proposal is to improve the transcription service in Jitsi-Meet and
integrate a translation module in it for real time transcription with translation.</p>

<p><img src="/assets/img/blog/gsoc18-phase-0/jitsi-gsoc.png" alt="Jitsi-GSoC" /></p>

<h3 id="mentors">Mentors</h3>
<p>I will be mentored by <a href="https://github.com/bgrozev">Boris Grozev</a> and <a href="https://github.com/nikvaessen">Nik Vaessen</a>.
Nik was a GSoC student with Jitsi in the previous two summers and I will be working to
improve and further extend his work.<br />
You can read more about his contributions in his blog <a href="https://nikvaessen.github.io">here</a>.</p>

<h3 id="community-bonding-period">Community Bonding Period</h3>
<p>We have had a couple of video meets using the same platform to discuss more about the
project. We are further discussing about the pros and cons of client-side translations
vs. server-side translations to finalize it.</p>

<p>Development Environment is being setup along with a VM to support it for testing out
changes separately.</p>

<blockquote>
  <p>Exciting summer ahead. Lets get started ;)</p>
</blockquote>]]></content><author><name>Praveen Gupta</name><email>pvgupta24@gmail.com</email></author><category term="gsoc" /><summary type="html"><![CDATA[Selected for Google Summer of Code 2018 with Jitsi and the Community Bonding Period starts.]]></summary></entry></feed>